p8105_hw2_ll3407
================
2022-10-02

## Problem 1

Read and clean the data

    ## -- Attaching packages --------------------------------------- tidyverse 1.3.2 --
    ## v ggplot2 3.3.6      v purrr   0.3.4 
    ## v tibble  3.1.8      v dplyr   1.0.10
    ## v tidyr   1.2.0      v stringr 1.4.1 
    ## v readr   2.1.2      v forcats 0.5.2 
    ## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()
    ## Rows: 1868 Columns: 32
    ## -- Column specification --------------------------------------------------------
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## i Use `spec()` to retrieve the full column specification for this data.
    ## i Specify the column types or set `show_col_types = FALSE` to quiet this message.

    ##  [1] "division"           "line"               "station_name"      
    ##  [4] "station_latitude"   "station_longitude"  "route1"            
    ##  [7] "route2"             "route3"             "route4"            
    ## [10] "route5"             "route6"             "route7"            
    ## [13] "route8"             "route9"             "route10"           
    ## [16] "route11"            "entrance_type"      "entry"             
    ## [19] "exit_only"          "vending"            "staffing"          
    ## [22] "staff_hours"        "ada"                "ada_notes"         
    ## [25] "free_crossover"     "north_south_street" "east_west_street"  
    ## [28] "corner"             "entrance_latitude"  "entrance_longitude"
    ## [31] "station_location"   "entrance_location"

Retain line, station,name, station latitude / longitude, routes served,
entry, vending, entrance type, and ADA compliance

``` r
NYC_clean = select(NYC_transit,line,station_name,station_latitude,station_longitude,route1:route11, entrance_type, entry, vending, ada)
```

Convert entry variable from character to a logical variable

``` r
NYC_clean$entry <-NYC_clean$entry %>% 
plyr::revalue(c("YES"=TRUE,"NO"=FALSE))
```

Description of dataset:  
\* The original data ‘NYC_Transit_Subway_Entrance_And_Exit_Data.csv’
contains 32 variables, including division, line, station_name,
station_latitude, station_longitude, route1, route2, route3, route4,
route5, route6, route7, route8, route9, route10, route11, entrance_type,
entry, exit_only, vending, staffing, staff_hours, ada, ada_notes,
free_crossover, north_south_street, east_west_street, corner,
entrance_latitude, entrance_longitude, station_location,
entrance_location  
\* We clean the name of the dataframe, retain variables into the new
dataframe ‘NYC_clean’ including line, station,name, station latitude /
longitude, routes served, entry, vending, entrance type, and ADA
compliance  
\* There are 1,868 rows x 19 columns in data ‘NYC_clean’. Those data are
not tidy.

Stations distinct

``` r
distinct(NYC_clean, station_name, .keep_all = FALSE)
```

    ## # A tibble: 356 x 1
    ##    station_name            
    ##    <chr>                   
    ##  1 25th St                 
    ##  2 36th St                 
    ##  3 45th St                 
    ##  4 53rd St                 
    ##  5 59th St                 
    ##  6 77th St                 
    ##  7 86th St                 
    ##  8 95th St                 
    ##  9 9th St                  
    ## 10 Atlantic Av-Barclays Ctr
    ## # ... with 346 more rows

-   There are 356 distinct stations.

``` r
table(NYC_clean$ada)
```

    ## 
    ## FALSE  TRUE 
    ##  1400   468

-   468 stations are ADA compliant.

``` r
table(NYC_clean$vending)
```

    ## 
    ##   NO  YES 
    ##  183 1685

-   The proportion of station entrances/exits without vending allow
    entrance is 9.7965739%

``` r
NYC_clean$route8<-as.character(NYC_clean$route8, c(1,4,5,23,4,20,NA))
NYC_clean$route9<-as.character(NYC_clean$route9, c(2,5,23,5,NA))
NYC_clean$route10<-as.character(NYC_clean$route10, c(3,23,NA))
NYC_clean$route11<-as.character(NYC_clean$route11, c(7,23,NA))

NYC_route =
tidyr::pivot_longer(
    NYC_clean,
    route1:route11,
    names_to = "route_number",
    values_to = "route_name",
    names_prefix = "route"
    )
view(NYC_route）
table(NYC_route$route_name)
```

-   There are 273 distinct stations serve the A train.

``` r
A_ada=filter(NYC_route,route_name =="A" & ada == "TRUE")
view(A_ada)
```

-   Of the stations that serve the A train, there are 107 ADA compliant.

\##Problem 2 \*Read and clean Mr.Trash Wheel dataset

``` r
MTW_data = 
  readxl::read_excel('./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx', sheet = 'Mr. Trash Wheel', range = "A2:N535") %>% 
  janitor::clean_names() %>% 
  tidyr::drop_na(dumpster) %>% 
  mutate(sports_balls = as.integer((sports_balls),length=0)) %>% 
  mutate(type="Mr")
```

\*Read and clean Mr.Trash Wheel dataset

``` r
PTW_data = 
  readxl::read_excel('./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx', sheet = 'Professor Trash Wheel', range = "A2:N117") %>% 
  janitor::clean_names() %>% 
  tidyr::drop_na(dumpster) %>% 
  mutate(sports_balls = as.integer((sports_balls),length=0)) %>% 
  mutate(type = "Professor") %>% 
  mutate(dumpster = as.character(dumpster))
```

-   a single tidy data

``` r
single_tidy = 
  bind_rows(MTW_data,PTW_data)
```

**The combined data ‘single_tidy’ has 525 observations and 15 variables,
including dumpster, month, year, date, weight_tons, volume_cubic_yards,
plastic_bottles, polystyrene, cigarette_butts, glass_bottles,
grocery_bags, chip_bags, sports_balls, homes_powered, and type*  
*\_The total weight of trash collected by Professor Trash Wheel is
135.5\_
