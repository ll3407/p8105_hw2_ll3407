---
title: "p8105_hw2_ll3407"
output: github_document
date: "2022-10-02"
---

## Problem 1
Read and clean the data
```{r, echo=FALSE}
library(tidyverse)
NYC_transit = read_csv(file = './data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv') %>% 
janitor::clean_names() 
view(NYC_transit)
names(NYC_transit)
```

Retain line, station,name, station latitude / longitude, routes served, entry, vending, entrance type, and ADA compliance


```{r}
NYC_clean = select(NYC_transit,line,station_name,station_latitude,station_longitude,route1:route11, entrance_type, entry, vending, ada)

```

Convert entry variable from character to a logical variable
```{r}
NYC_clean$entry <-NYC_clean$entry %>% 
plyr::revalue(c("YES"=TRUE,"NO"=FALSE))
```
Description of dataset:  
* The original data 'NYC_Transit_Subway_Entrance_And_Exit_Data.csv' contains 32 variables, including `r names(NYC_transit)`  
* We clean the name of the dataframe, retain variables into the new dataframe 'NYC_clean' including line, station,name, station latitude / longitude, routes served, entry, vending, entrance type, and ADA compliance  
* There are 1,868 rows x 19 columns in data 'NYC_clean'. Those data are not tidy.

Stations distinct
```{r}
distinct(NYC_clean, station_name, .keep_all = FALSE)

```
* There are 356 distinct stations.

```{r}
table(NYC_clean$ada)
```

* 468 stations are ADA compliant.
```{r}
table(NYC_clean$vending)
```

* The proportion of station entrances/exits without vending allow entrance is `r 100*(183/(183+1685))`%

```{r, eval=FALSE}
NYC_clean$route8<-as.character(NYC_clean$route8, c(1,4,5,23,4,20,NA))
NYC_clean$route9<-as.character(NYC_clean$route9, c(2,5,23,5,NA))
NYC_clean$route10<-as.character(NYC_clean$route10, c(3,23,NA))
NYC_clean$route11<-as.character(NYC_clean$route11, c(7,23,NA))

NYC_route =
tidyr::pivot_longer(
    NYC_clean,
    route1:route11,
    names_to = "route_number",
    values_to = "route_name",
    names_prefix = "route"
    )
view(NYC_routeï¼‰
table(NYC_route$route_name)
```
* There are 273 distinct stations serve the A train.

```{r,eval=FALSE}
A_ada=filter(NYC_route,route_name =="A" & ada == "TRUE")
view(A_ada)
```
* Of the stations that serve the A train, there are 107 ADA compliant.

##Problem 2
*Read and clean Mr.Trash Wheel dataset
```{r}
MTW_data = 
  readxl::read_excel('./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx', sheet = 'Mr. Trash Wheel', range = "A2:N535") %>% 
  janitor::clean_names() %>% 
  tidyr::drop_na(dumpster) %>% 
  mutate(sports_balls = as.integer((sports_balls),length=0)) %>% 
  mutate(type="Mr")

```

*Read and clean Mr.Trash Wheel dataset
```{r}
PTW_data = 
  readxl::read_excel('./data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx', sheet = 'Professor Trash Wheel', range = "A2:N117") %>% 
  janitor::clean_names() %>% 
  tidyr::drop_na(dumpster) %>% 
  mutate(sports_balls = as.integer((sports_balls),length=0)) %>% 
  mutate(type = "Professor") %>% 
  mutate(dumpster = as.character(dumpster))
   
```

* a single tidy data
```{r}
single_tidy = 
  bind_rows(MTW_data,PTW_data)

sum(PTW_data$weight_tons)

MTW2020=filter(MTW_data,year=='2020')
sum(MTW2020$sports_balls)
```
*_The combined data 'single_tidy' has 525 observations and 15 variables, including dumpster, month, year, date, weight_tons, volume_cubic_yards, plastic_bottles, polystyrene, cigarette_butts, glass_bottles, grocery_bags, chip_bags, sports_balls, homes_powered, and type._  
*_The total weight of trash collected by Professor Trash Wheel is 135.5 tons._  
*_The total number of sports balls collected by Mr. Trash Wheel in 2020 is 856._

## Problem 3
clean data pols-month.csv

```{r eval=FALSE}

library(tidyverse)
polsmonth = read_csv(file = './data/Fivethirtyeight/pols-month.csv') %>% 
  janitor::clean_names() %>% 
  separate(mon, sep="-", into = c("year","month","day")) %>% 
  mutate(month = recode(month, "01" = "January", "02" = "February", "03" = "March", "04" = "April", "05" = "May", "06" = "June", "07" = "July", "08" = "August", "09" = "September", "10" = "October", "11" = "November", "12" = "December"),
         month = factor(month)) %>% 
  pivot_longer(prez_gop|prez_dem,
               names_to = 'president',
               names_prefix = 'prez_') %>% 
  select(-day)
  

```

Clean data snp.csv
```{r eval=FALSE}
snp = read_csv(file = './data/Fivethirtyeight/snp.csv',
               col_types = 'ccddiiii')%>% 
  janitor::clean_names()%>% 
  separate(date, sep="/", into = c("month","day","year")) %>% 
  mutate(month = recode(month, "1" = "January", "2" = "February", "3" = "March", "4" = "April", "5" = "May", "6" = "June", "7" = "July", "8" = "August", "9" = "September", "10" = "October", "11" = "November", "12" = "December")) %>% 
  relocate(year,month)
 
```




